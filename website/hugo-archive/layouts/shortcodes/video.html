{{/* video shortcode for Hugo
    Parameters:
    - src: URL or local path to the video file (required)
    - type: video MIME type (optional, defaults to mp4)
    - width: width of the video player (optional, defaults to 100%)
    - height: height of the video player (optional, defaults to auto)
    - autoplay: enable autoplay (optional, true/false, defaults to false)
    - loop: enable looping (optional, true/false, defaults to false)
    - muted: mute the video (optional, true/false, defaults to false)
    - controls: show player controls (optional, true/false, defaults to true)
    - poster: thumbnail image URL (optional)
    - class: additional CSS classes (optional)
    - youtube: YouTube video ID (optional, overrides src)
    - vimeo: Vimeo video ID (optional, overrides src)

    Usage examples:
    {{< video src="/videos/my-video.mp4" >}}
    {{< video youtube="dQw4w9WgXcQ" autoplay="true" >}}
    {{< video vimeo="123456789" width="640px" height="480px" >}}
*/}}

{{ $src := .Get "src" }}
{{ $type := .Get "type" | default "mp4" }}
{{ $width := .Get "width" | default "100%" }}
{{ $height := .Get "height" | default "auto" }}
{{ $autoplay := .Get "autoplay" | default "false" }}
{{ $loop := .Get "loop" | default "false" }}
{{ $muted := .Get "muted" | default "false" }}
{{ $controls := .Get "controls" | default "true" }}
{{ $poster := .Get "poster" | default "" }}
{{ $class := .Get "class" | default "" }}
{{ $youtube := .Get "youtube" | default "" }}
{{ $vimeo := .Get "vimeo" | default "" }}

<div class="video-wrapper {{ $class }}">
  {{ if $youtube }}
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe
        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
        src="https://www.youtube.com/embed/{{ $youtube }}?autoplay={{ $autoplay }}&loop={{ $loop }}&mute={{ $muted }}&controls={{ if eq $controls "true" }}1{{ else }}0{{ end }}"
        frameborder="0"
        allowfullscreen>
      </iframe>
    </div>
  {{ else if $vimeo }}
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe
        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
        src="https://player.vimeo.com/video/{{ $vimeo }}?autoplay={{ $autoplay }}&loop={{ $loop }}&muted={{ $muted }}&controls={{ $controls }}"
        frameborder="0"
        allowfullscreen>
      </iframe>
    </div>
  {{ else }}
    <video
      width="{{ $width }}"
      height="{{ $height }}"
      {{ if eq $autoplay "true" }}autoplay{{ end }}
      {{ if eq $loop "true" }}loop{{ end }}
      {{ if eq $muted "true" }}muted{{ end }}
      {{ if eq $controls "true" }}controls{{ end }}
      {{ if $poster }}poster="{{ $poster }}"{{ end }}
      preload="metadata"
    >
      <source src="{{ $src }}" type="video/{{ $type }}">
      Your browser does not support the video tag.
    </video>
  {{ end }}
</div>
